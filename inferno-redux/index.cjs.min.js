"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("hoist-non-inferno-statics"),n=require("inferno"),e=require("redux");function r(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var o=r(t),i=null,s=function(){},p={clear:function(){},notify:function(){},subscribe:function(t){return s}},u=function(){var t=[],n=[];return{clear:function(){n=i,t=i},notify:function(){for(var e=t=n,r=0;r<e.length;++r)e[r]()},subscribe:function(e){var r=!0;return n===t&&(n=t.slice()),n.push(e),function(){if(!r||null===t)return;r=!1,n===t&&(n=t.slice()),n.splice(n.indexOf(e),1)}}}},a=function(t,n,e){this.store=t,this.parentSub=n,this.onStateChange=e,this.unsubscribe=null,this.listeners=p};function c(t,n){var e={};if(t)for(var r in t)e[r]=t[r];if(n)for(var o in n)e[o]=n[o];return e}function d(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===n.indexOf(r)&&(e[r]=t[r]);return e}a.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},a.prototype.notifyNestedSubs=function(){this.listeners.notify()},a.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},a.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=u())},a.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=p)};var f=0,h={},l=function(){},v=function(t,n){var e={error:null,props:{},run:function(r){try{var o=t(n.getState(),r);(o!==e.props||e.error)&&(e.shouldComponentUpdate=!0,e.props=o,e.error=null)}catch(t){e.shouldComponentUpdate=!0,e.error=t}},shouldComponentUpdate:!1};return e},b=function(t,n){if(!t)throw new Error(n)};function y(t){return"ConnectAdvanced("+t+")"}function m(t,e){var r=e.getDisplayName;void 0===r&&(r=y);var i=e.methodName;void 0===i&&(i="connectAdvanced");var s=e.renderCountProp;void 0===s&&(s=null);var p=e.shouldHandleStateChanges;void 0===p&&(p=!0);var u=e.storeKey;void 0===u&&(u="store");var m=e.withRef;void 0===m&&(m=!1);var P=d(e,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),S=u+"Subscription",C=f++;return function(e){b("function"===typeof e,"You must pass a component to the function returned by connect. Instead received "+e);var d=e.displayName||e.name||"Component",f=r(d),y=c(P,{WrappedComponent:e,displayName:f,getDisplayName:r,methodName:i,renderCountProp:s,shouldHandleStateChanges:p,storeKey:u,withRef:m,wrappedComponentName:d}),O=function(r){function o(t,n){r.call(this,t,n),this.version=C,this.state={},this.renderCount=0,this.store=this.props[u]||this.context[u],this.propsMode=Boolean(t[u]),this.setWrappedInstance=this.setWrappedInstance.bind(this),b(!!this.store,'Could not find "'+u+'" in either the context or props of "'+f+'". Either wrap the root component in a <Provider>, or explicitly pass "'+u+'" as a prop to "'+f+'".'),this.initSelector(),this.initSubscription()}return r&&(o.__proto__=r),o.prototype=Object.create(r&&r.prototype),o.prototype.constructor=o,o.prototype.getChildContext=function(){var t,n=this.propsMode?null:this.subscription;return(t={})[S]=n||this.context[S],t},o.prototype.componentWillMount=function(){if(!p||this.$SSR)return;this.subscription.trySubscribe(),this.selector.run(this.props)},o.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},o.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},o.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=l,this.store=null,this.selector.run=l,this.selector.shouldComponentUpdate=!1},o.prototype.getWrappedInstance=function(){return b(m,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+i+"() call."),this.wrappedInstance},o.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},o.prototype.initSelector=function(){var n=t(this.store.dispatch,y);this.selector=v(n,this.store),this.selector.run(this.props)},o.prototype.initSubscription=function(){if(!p)return;var t=(this.propsMode?this.props:this.context)[S];this.subscription=new a(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)},o.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(h)):this.notifyNestedSubs()},o.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},o.prototype.isSubscribed=function(){return Boolean(this.subscription&&this.subscription.isSubscribed())},o.prototype.addExtraProps=function(t){if(!s)return t;var n=c(t,null);return s&&(n[s]=this.renderCount++),this.propsMode&&this.subscription&&(n[S]=this.subscription),n},o.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return n.normalizeProps(n.createComponentVNode(2,e,this.addExtraProps(t.props),null,m?this.setWrappedInstance:null))},o}(n.Component);return O.displayName=f,O.WrappedComponent=e,o.default(O,e)}}var P=function(t){function n(n,e){t.call(this,n,e),this.store=n.store}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getChildContext=function(){return{store:this.store,storeSubscription:null}},n.prototype.render=function(){return this.props.children},n}(n.Component);P.displayName="Provider";var S=Object.prototype.hasOwnProperty,C=function(t,n){if(t===n)return!0;var e=0,r=0;for(var o in t){if(S.call(t,o)&&t[o]!==n[o])return!1;e++}for(var i in n)S.call(n,i)&&r++;return e===r},O=function(t){return function(n,e){var r=t(n,e),o=function(){return r};return o.dependsOnOwnProps=!1,o}},w=function(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?!!t.dependsOnOwnProps:1!==t.length},g=function(t,n){return function(n,e){e.displayName;var r=function(t,n){return r.dependsOnOwnProps?r.mapToProps(t,n):r.mapToProps(t)};return r.dependsOnOwnProps=w(t),r.mapToProps=function(n,e){r.mapToProps=t;var o=r(n,e);return"function"===typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=w(o),o=r(n,e)),o},r}},N=function(t){return"function"===typeof t?g(t):void 0},E=function(t){return t?void 0:O((function(t){return{dispatch:t}}))},q=function(t){return t&&"object"===typeof t?O((function(n){return e.bindActionCreators(t,n)})):void 0},x=[N,E,q],M=function(t){return"function"===typeof t?g(t):void 0},T=function(t){return t?void 0:O((function(){return{}}))},U=[M,T],D=function(t,n,e){var r=c(e,t);if(n)for(var o in n)r[o]=n[o];return r},W=function(t){return function(n,e){e.displayName;var r,o=e.pure,i=e.areMergedPropsEqual,s=!1;return function(n,e,p){var u=t(n,e,p);return s?o&&i(u,r)||(r=u):(s=!0,r=u),r}}},_=function(t){return"function"===typeof t?W(t):void 0},j=function(t){return t?void 0:function(){return D}},I=[_,j];function A(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===n.indexOf(r)&&(e[r]=t[r]);return e}var R=function(t,n,e,r){return function(o,i){return e(t(o,i),n(r,i),i)}},H=function(t,n,e,r,o){var i,s,p,u,a,c=o.areStatesEqual,d=o.areOwnPropsEqual,f=o.areStatePropsEqual,h=!1;return function(o,l){return h?function(o,h){var l,v,b=!d(h,s),y=!c(o,i);if(i=o,s=h,b&&y)return p=t(i,s),n.dependsOnOwnProps&&(u=n(r,s)),a=e(p,u,s);if(b)return t.dependsOnOwnProps&&(p=t(i,s)),n.dependsOnOwnProps&&(u=n(r,s)),a=e(p,u,s);if(y)return l=t(i,s),v=!f(l,p),p=l,v&&(a=e(p,u,s)),a;return a}(o,l):(p=t(i=o,s=l),u=n(r,s),a=e(p,u,s),h=!0,a)}},F=function(t,n){var e=n.initMapStateToProps,r=n.initMapDispatchToProps,o=n.initMergeProps,i=A(n,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=e(t,i),p=r(t,i),u=o(t,i);return(i.pure?H:R)(s,p,u,t,i)};function B(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===n.indexOf(r)&&(e[r]=t[r]);return e}var K=function(t,n,e){for(var r=n.length-1;r>=0;r--){var o=n[r](t);if(o)return o}return function(n,r){throw new Error("Invalid value of type "+typeof t+" for "+e+" argument when connecting component "+r.wrappedComponentName+".")}},z=function(t,n){return t===n},V=function(t){void 0===t&&(t={});var n=t.connectHOC;void 0===n&&(n=m);var e=t.mapStateToPropsFactories;void 0===e&&(e=U);var r=t.mapDispatchToPropsFactories;void 0===r&&(r=x);var o=t.mergePropsFactories;void 0===o&&(o=I);var i=t.selectorFactory;return void 0===i&&(i=F),function(t,s,p,u){void 0===u&&(u={});var a=u.pure;void 0===a&&(a=!0);var d=u.areStatesEqual;void 0===d&&(d=z);var f=u.areOwnPropsEqual;void 0===f&&(f=C);var h=u.areStatePropsEqual;void 0===h&&(h=C);var l=u.areMergedPropsEqual;void 0===l&&(l=C);var v=B(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),b=K(t,e,"mapStateToProps"),y=K(s,r,"mapDispatchToProps"),m=K(p,o,"mergeProps");return n(i,c({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:!!t,areMergedPropsEqual:l,areOwnPropsEqual:f,areStatePropsEqual:h,areStatesEqual:d,initMapDispatchToProps:y,initMapStateToProps:b,initMergeProps:m,pure:a},v))}},Y=V();function $(t){return function(n){return e.bindActionCreators(t,n)}}exports.Provider=P,exports.connect=Y,exports.connectAdvanced=m,exports.wrapActionCreators=$;
